# Si Crypto Platform - Environment Variables (FREE Stack)
# Copy this file to .env and fill in your values

# ============================================================================
# APPLICATION
# ============================================================================
NODE_ENV=development
PORT=3000
APP_NAME=Si Crypto Platform
APP_URL=http://localhost:3000

# ============================================================================
# DATABASE (Local Docker - FREE)
# ============================================================================
DATABASE_URL=postgresql://si_user:si_password_dev@localhost:5432/si_crypto
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=si_user
DATABASE_PASSWORD=si_password_dev
DATABASE_NAME=si_crypto

# ============================================================================
# REDIS CACHE (Local Docker - FREE)
# ============================================================================
REDIS_URL=redis://:si_redis_password_dev@localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=si_redis_password_dev

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-min-32-chars-please-change-this
JWT_REFRESH_SECRET=your-super-secret-refresh-key-min-32-chars-please-change-this
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ============================================================================
# BLOCKCHAIN NODES (FREE)
# ============================================================================

# Infura (Ethereum) - FREE Tier
# Sign up: https://www.infura.io/
INFURA_PROJECT_ID=your_infura_project_id_here
INFURA_PROJECT_SECRET=your_infura_secret_here
INFURA_MAINNET_URL=https://mainnet.infura.io/v3/YOUR_PROJECT_ID
INFURA_SEPOLIA_URL=https://sepolia.infura.io/v3/YOUR_PROJECT_ID

# Alternative: Ankr (FREE - No signup)
ANKR_MAINNET_URL=https://rpc.ankr.com/eth
ANKR_SEPOLIA_URL=https://rpc.ankr.com/eth_sepolia

# BlockCypher (Bitcoin) - FREE Tier
# Docs: https://www.blockcypher.com/dev/bitcoin/
BLOCKCYPHER_TOKEN=
BLOCKCYPHER_BASE_URL=https://api.blockcypher.com/v1/btc/main
BLOCKCYPHER_TEST_URL=https://api.blockcypher.com/v1/btc/test3

# Alternative: Blockstream (FREE - No signup)
BLOCKSTREAM_API_URL=https://blockstream.info/api
BLOCKSTREAM_TESTNET_URL=https://blockstream.info/testnet/api

# ============================================================================
# KEY MANAGEMENT (Self-Hosted - FREE)
# ============================================================================

# Master Seed Encryption
# IMPORTANT: Use a strong password (32+ characters)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
MASTER_SEED_PASSWORD=your-super-strong-password-min-32-chars-CHANGE-THIS
ENCRYPTED_MASTER_SEED=will-be-generated-on-first-wallet-creation

# Optional: HashiCorp Vault (if using)
VAULT_ENABLED=false
VAULT_URL=http://localhost:8200
VAULT_TOKEN=myroot

# ============================================================================
# PRICE FEEDS (FREE)
# ============================================================================

# CoinGecko (FREE Tier - No API key needed)
# Docs: https://www.coingecko.com/en/api/documentation
COINGECKO_BASE_URL=https://api.coingecko.com/api/v3
COINGECKO_API_KEY=
PRICE_UPDATE_INTERVAL=60000

# Binance WebSocket (FREE - No signup)
BINANCE_WS_URL=wss://stream.binance.com:9443/stream

# Price Cache TTL (seconds)
PRICE_CACHE_TTL=300

# ============================================================================
# EMAIL NOTIFICATIONS (FREE)
# ============================================================================

# Resend (FREE - 3k emails/month)
# Sign up: https://resend.com/
RESEND_API_KEY=re_your_api_key_here
EMAIL_FROM=Si Crypto <noreply@yourdomain.com>
EMAIL_FROM_NAME=Si Crypto

# Alternative: SendGrid (FREE - 100 emails/day)
SENDGRID_API_KEY=
SENDGRID_FROM_EMAIL=

# Alternative: Gmail SMTP (Development only)
GMAIL_USER=
GMAIL_APP_PASSWORD=

# ============================================================================
# PUSH NOTIFICATIONS (FREE)
# ============================================================================

# Firebase Cloud Messaging (FREE Forever)
# Create project: https://console.firebase.google.com/
FIREBASE_SERVER_KEY=your_firebase_server_key
FIREBASE_PROJECT_ID=si-crypto-app
FIREBASE_SENDER_ID=your_sender_id

# Alternative: OneSignal (FREE)
ONESIGNAL_APP_ID=
ONESIGNAL_REST_API_KEY=

# ============================================================================
# KYC & COMPLIANCE (Optional for MVP)
# ============================================================================

# Sumsub (Paid - Can skip for MVP)
SUMSUB_ENABLED=false
SUMSUB_APP_TOKEN=
SUMSUB_SECRET_KEY=
SUMSUB_BASE_URL=https://api.sumsub.com
SUMSUB_WEBHOOK_SECRET=

# Manual KYC (FREE - You review manually)
MANUAL_KYC_ENABLED=true
KYC_ADMIN_EMAIL=admin@yourdomain.com

# ============================================================================
# ON-RAMP (Optional for MVP)
# ============================================================================

# MoonPay (Paid - Can skip for MVP)
MOONPAY_ENABLED=false
MOONPAY_PUBLISHABLE_KEY=
MOONPAY_SECRET_KEY=
MOONPAY_BASE_URL=https://api.moonpay.com
MOONPAY_WEBHOOK_SECRET=

# Skip on-ramp - users deposit from external wallets
EXTERNAL_DEPOSIT_ONLY=true

# ============================================================================
# SECURITY
# ============================================================================

# Rate Limiting
RATE_LIMIT_WINDOW=15m
RATE_LIMIT_MAX_REQUESTS=100

# CORS
CORS_ORIGIN=http://localhost:8081,exp://localhost:8081
CORS_CREDENTIALS=true

# Session
SESSION_SECRET=your-session-secret-min-32-chars-CHANGE-THIS

# Encryption
ENCRYPTION_ALGORITHM=aes-256-gcm

# ============================================================================
# WITHDRAWAL LIMITS (Per KYC Tier)
# ============================================================================

# Tier 1 (No KYC / Basic)
TIER_1_DAILY_LIMIT=100
TIER_1_WITHDRAWAL_LIMIT=50

# Tier 2 (Full KYC)
TIER_2_DAILY_LIMIT=10000
TIER_2_WITHDRAWAL_LIMIT=5000

# Tier 3 (Enhanced KYC)
TIER_3_DAILY_LIMIT=100000
TIER_3_WITHDRAWAL_LIMIT=50000

# Max withdrawals per day
MAX_WITHDRAWALS_PER_DAY=5

# Withdrawal approval threshold (USD)
WITHDRAWAL_APPROVAL_THRESHOLD=10000

# ============================================================================
# BLOCKCHAIN SETTINGS
# ============================================================================

# Bitcoin
BTC_REQUIRED_CONFIRMATIONS=3
BTC_GAS_FEE_MULTIPLIER=1.5

# Ethereum
ETH_REQUIRED_CONFIRMATIONS=12
ETH_GAS_LIMIT=21000
ETH_MAX_GAS_PRICE=100

# USDC Contract Address (Ethereum Mainnet)
USDC_CONTRACT_ADDRESS=0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48

# Testnet Mode
TESTNET_MODE=true

# ============================================================================
# LOGGING & MONITORING
# ============================================================================

# Log Level (error, warn, info, debug, verbose)
LOG_LEVEL=debug

# Sentry (Error Tracking - FREE Tier)
SENTRY_ENABLED=false
SENTRY_DSN=

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Enable/disable features
FEATURE_SWAPS_ENABLED=true
FEATURE_WITHDRAWALS_ENABLED=true
FEATURE_DEPOSITS_ENABLED=true
FEATURE_PRICE_CHARTS_ENABLED=true

# Maintenance mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System maintenance in progress

# ============================================================================
# DEVELOPMENT
# ============================================================================

# Debug mode
DEBUG=si:*

# Seed database with test data
SEED_TEST_DATA=true

# Enable API documentation (Swagger)
ENABLE_API_DOCS=true

# ============================================================================
# NOTES
# ============================================================================

# FREE Services Used:
# - Infura (Ethereum): 100k requests/day
# - BlockCypher (Bitcoin): 200 requests/hour
# - CoinGecko (Prices): 50 calls/minute
# - Resend (Email): 3k emails/month
# - Firebase (Push): Unlimited
# - PostgreSQL: Self-hosted (Docker)
# - Redis: Self-hosted (Docker)
#
# Total Monthly Cost: $0
#
# Upgrade when needed:
# - Alchemy ($200/mo) for better Ethereum reliability
# - AWS KMS ($50/mo) for enterprise key management
# - Paid KYC provider when processing real users
